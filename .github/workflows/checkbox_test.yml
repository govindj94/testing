name: Dispatch Workflow Example

on:
  workflow_dispatch:
    inputs:
      role-id:
        description: 'Specify id for role'
        required: true
      policy :
        type: choice
        description: Select the policy name to add to role
        required: true
        options:
        - 1002000166-user.read
        - 1002079143-by.yms.traileractivity.manage
        - 1002079144-by.yms.traileractivity.operate
        - 1002079145-by.yms.traileractivity.view
        - 1002079140-by.yms.carrierframework.manage
        - 1002079141-by.yms.carrierframework.operate
        - 1002079142-by.yms.carrierframework.view
        - 1002106605-plat.lui.portal.settings.categories.yms-settings-operations-category.write
        - 1002106606-plat.lui.portal.settings.categories.yms-settings-operations-category.read
        - 1002106607-plat.lui.portal.settings.categories.yms-settings-operations-category.groups.yms-settings-operations-yard-group.write
        - 1002106608-plat.lui.portal.settings.categories.yms-settings-operations-category.groups.yms-settings-operations-yard-group.read
jobs:
  rest-action:
    runs-on: ubuntu-latest
    timeout-minutes: 60
    env:
      LIAM_Realm_Service_API_URL: https://api-tst.jdadelivers.com/iam/realm/v1/roles
      ROLE_ID: ${{ github.event.inputs.role-id }}
      ROLE_DESCRIPTION: ${{ github.event.inputs.role-description }}
      MODULE_ID: ${{ github.event.inputs.module-id }}
      ROLE_TYPE: ${{ github.event.inputs.role-type }}

    steps:
      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Getting Policy Name 
        run: |
          IFS='-' read -ra ADDR <<< "${{ github.event.inputs.policy }}"
          t1="${ADDR[0]}"
          PolicyName="${t1}"
          echo "policy=${PolicyName}" >> $GITHUB_ENV
